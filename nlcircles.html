<!DOCTYPE html>
<html>
<head>
    <meta charset='utf-8' />
    <title>Map Fraudulent Companies Netherlands</title>
    <meta name='viewport' content='initial-scale=1,maximum-scale=1,user-scalable=no' />
    <link href="https://fonts.googleapis.com/css?family=Open+Sans" rel="stylesheet">
    <script src='https://api.tiles.mapbox.com/mapbox-gl-js/v0.52.0/mapbox-gl.js'></script>
    <link href='https://api.tiles.mapbox.com/mapbox-gl-js/v0.52.0/mapbox-gl.css' rel='stylesheet' />
	<link rel="stylesheet" href="basis.css" type="text/css" />
</head>
<script>
	function includeHTML() {
		var z, i, elmnt, file, xhttp;
		/*loop through a collection of all HTML elements:*/
		z = document.getElementsByTagName("*");
		for (i = 0; i < z.length; i++) {
			elmnt = z[i];
			/*search for elements with a certain atrribute:*/
			file = elmnt.getAttribute("w3-include-html");
			if (file) {
				/*make an HTTP request using the attribute value as the file name:*/
				xhttp = new XMLHttpRequest();
				xhttp.onreadystatechange = function() {
					if (this.readyState == 4) {
						if (this.status == 200) {elmnt.innerHTML = this.responseText;}
							if (this.status == 404) {elmnt.innerHTML = "Page not found.";}
							/*remove the attribute, and call this function once more:*/
							elmnt.removeAttribute("w3-include-html");
							includeHTML();
					}
				}      
				xhttp.open("GET", file, true);
				xhttp.send();
				/*exit the function:*/
				return;
			}
		}
	};
	
</script>
	
<body>
	<header>
		<h1>Finding Fraud</h1>
	</header>
	
	<div id='map'></div>
	<br>
<!--	<button id='nl'>Nederland</button>
	<button id='gron'>Groningen</button>
	<button id='fries'>Friesland</button>
	<button id='dren'>Drenthe</button>
	<button id='ovrij'>Overijssel</button>
	<button id='flev'>Flevoland</button>
	<button id='geld'>Gelderland</button>
	<button id='utr'>Utrecht</button>
	<button id='nrdh'>Noord-Holland</button>
	<button id='zdhl'>Zuid-Holland</button>
	<button id='zeel'>Zeeland</button>
	<button id='nrdb'>Noord-Brabant</button>
	<button id='limb'>Limburg</button>
	-->
	<div id="mySidenav" class="sidenav">
		<a href="javascript:void(0)" class="closebtn" onclick="closeNav()">&times;</a>
		<div w3-include-html="info.html"></div>
		<div class="info">
			<h2>Distributie en Container Centrum B.V.</h2>
			<p><b>Company Address</b>
			<br>Willemskade 1<br>8911 AW Leeuwarden</p>
			<p><b>Correspondence Address</b>
			<br>Postbus 2739<br>8901 AE Leeuwarden</p>
			<p><b>SBI</b>
			<br>Expediteurs/cargadoors/bevrachters e.d.</p>
			<p><b>Rechtsvorm</b>
			<br>Besloten Vennootschap (bv)</p>
			<br>
			<p><b>Website:</b> niet bekend</p>
		</div>
	</div>
	<footer>
		<p>A website made by Don, Ella, Jeffrey, Rouel, Roza &amp; Wessel &copy; 2019 </p>
	</footer>
	<script>

	mapboxgl.accessToken = 'pk.eyJ1IjoiZWxsYXYiLCJhIjoiY2pxbmx0dDJtMW1hdTN4bm5pMXN0MGFxbiJ9.2F9-zpgWv6Ex-UlczFEuAQ';

	var map = new mapboxgl.Map({
		container: 'map',
		style: 'mapbox://styles/mapbox/light-v9',
		center: [4.7354443,52.1304886],
		zoom: 6.3
	});	

	// add colored circles https://www.mapbox.com/mapbox-gl-js/example/data-driven-circle-colors/
	map.on('load', function () {

		map.addLayer({
			'id': 'company',
			'type': 'circle',
			'source': {
				type: 'vector',
				url: 'mapbox://examples.8fgz4egr'
			},
			'source-layer': 'sf2010',
			'paint': {
				// make circles larger as the user zooms from z12 to z22
				'circle-radius': {
					'base': 1.75,
					'stops': [[12, 2], [22, 180]]
				},
				// color circles by ethnicity, using a match expression
				// https://www.mapbox.com/mapbox-gl-js/style-spec/#expressions-match
				'circle-color': [
					'match',
					['get', 'id'],
					'low', '#00ff00',
					'medium', '#ffff00',
					'high', '#ff0000',
					/* other */ '#00ffff'
				]	
			}
		});
	});

/*	document.getElementById('nl').addEventListener('click', function () {
    // by up to 5 degrees.
		map.flyTo({
        center: [4.7354443,52.1304886],
		zoom: 6.2
		});
	});
	en dan voor alle provincies
*/	
	
	var geojson = {
		type: 'FeatureCollection',
		features: [{
			type: 'Feature',
			geometry: {
				type: 'Point',
				coordinates: [4.616570, 51.875200]
			},
			properties: {
				title: 'Falco Lines B.V.',
				description: 'Ridderpoort 9, Ridderkerk'
				id: 'low'
			}
		},
		{
			type: 'Feature',
			geometry: {
				type: 'Point',
				coordinates: [5.795830, 53.197960]
			},
			properties: {
				title: 'Distr. en Container Centr. BV',
				description: 'Willemskade 1, Leeuwarden'
				id: 'high'
			}
		}]
	};
	
	// maybe markercluster? https://www.mapbox.com/mapbox.js/plugins/#leaflet-markercluster
	// add markers to map
	geojson.features.forEach(function(marker) {
		// create a HTML element for each feature
		var el = document.createElement('div');
		/*if (marker.properties.risk == 'low') {
			el.className = 'marker-low'
			} else if (marker.properties.risk == 'medium') {
				el.className = 'marker-medium'
			} else if (marker.properties.risk == 'high') {
				el.className = 'marker-high'
			} else {*/
				//el.className = 'marker' 
			//}
			
		
		// make a marker for each feature and add to the map
		new mapboxgl.Marker(el)
		.setLngLat(marker.geometry.coordinates)
		.setPopup(new mapboxgl.Popup({ offset: 25 }) // add popups
		.setHTML('<h3>' + marker.properties.title + '</h3><p>' + marker.properties.description + '</p><span style="cursor:pointer" onclick="openNav()">Meer info</a></span>'))
		.addTo(map);
	});
	
	function openNav() {
		document.getElementById("mySidenav").style.width = "250px";
	}

	function closeNav() {
		document.getElementById("mySidenav").style.width = "0";
	}
	
</script>

<script>
	includeHTML();
</script>

</body>
</html>
